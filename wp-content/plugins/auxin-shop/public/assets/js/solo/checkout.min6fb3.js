jQuery(function($){if("undefined"==typeof wc_checkout_params)return!1;var wc_checkout_form={updateTimer:!($.blockUI.defaults.overlayCSS.cursor="default"),dirtyInput:!1,selectedPaymentMethod:!1,xhr:!1,$order_review:$("#order_review"),$checkout_form:$("form.checkout"),init:function(){$(document.body).on("update_checkout",this.update_checkout),$(document.body).on("init_checkout",this.init_checkout),this.$checkout_form.on("click",'input[name="payment_method"]',this.payment_method_selected),$(document.body).hasClass("woocommerce-order-pay")&&(this.$order_review.on("click",'input[name="payment_method"]',this.payment_method_selected),this.$order_review.on("submit",this.submitOrder),this.$order_review.attr("novalidate","novalidate")),this.$checkout_form.attr("novalidate","novalidate"),this.$checkout_form.on("submit",this.submit),this.$checkout_form.on("input validate change",".input-text, select, input:checkbox",this.validate_field),this.$checkout_form.on("update",this.trigger_update_checkout),this.$checkout_form.on("change",'select.shipping_method, input[name^="shipping_method"], #ship-to-different-address input, .update_totals_on_change select, .update_totals_on_change input[type="radio"], .update_totals_on_change input[type="checkbox"]',this.trigger_update_checkout),this.$checkout_form.on("change",".address-field select",this.input_changed),this.$checkout_form.on("change",".address-field input.input-text, .update_totals_on_change input.input-text",this.maybe_input_changed),this.$checkout_form.on("keydown",".address-field input.input-text, .update_totals_on_change input.input-text",this.queue_update_checkout),this.$checkout_form.on("change","#ship-to-different-address input",this.ship_to_different_address),this.$checkout_form.find("#ship-to-different-address input").change(),this.init_payment_methods(),"1"===wc_checkout_params.is_checkout&&$(document.body).trigger("init_checkout"),"yes"===wc_checkout_params.option_guest_checkout&&$("input#createaccount").change(this.toggle_create_account).change()},init_payment_methods:function(){var $payment_methods=$(".woocommerce-checkout").find('input[name="payment_method"]');1===$payment_methods.length&&$payment_methods.eq(0).hide(),wc_checkout_form.selectedPaymentMethod&&$("#"+wc_checkout_form.selectedPaymentMethod).prop("checked",!0),0===$payment_methods.filter(":checked").length&&$payment_methods.eq(0).prop("checked",!0);var checkedPaymentMethod=$payment_methods.filter(":checked").eq(0).prop("id");1<$payment_methods.length&&$('div.payment_box:not(".'+checkedPaymentMethod+'")').filter(":visible").slideUp(0),$payment_methods.filter(":checked").eq(0).trigger("click")},get_payment_method:function(){return wc_checkout_form.$checkout_form.find('input[name="payment_method"]:checked').val()},payment_method_selected:function(e){if(e.stopPropagation(),1<$(".payment_methods input.input-radio").length){var target_payment_box=$("div.payment_box."+$(this).attr("ID")),is_checked=$(this).is(":checked");is_checked&&!target_payment_box.is(":visible")&&($("div.payment_box").filter(":visible").slideUp(230),is_checked&&target_payment_box.slideDown(230))}else $("div.payment_box").show();$(this).data("order_button_text")?$("#place_order").text($(this).data("order_button_text")):$("#place_order").text($("#place_order").data("value"));var selectedPaymentMethod=$('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");selectedPaymentMethod!==wc_checkout_form.selectedPaymentMethod&&$(document.body).trigger("payment_method_selected"),wc_checkout_form.selectedPaymentMethod=selectedPaymentMethod},toggle_create_account:function(){$("div.create-account").hide(),$(this).is(":checked")&&($("#account_password").val("").change(),$("div.create-account").slideDown())},init_checkout:function(){$(document.body).trigger("update_checkout")},maybe_input_changed:function(e){wc_checkout_form.dirtyInput&&wc_checkout_form.input_changed(e)},input_changed:function(e){wc_checkout_form.dirtyInput=e.target,wc_checkout_form.maybe_update_checkout()},queue_update_checkout:function(e){if(9===(e.keyCode||e.which||0))return!0;wc_checkout_form.dirtyInput=this,wc_checkout_form.reset_update_checkout_timer(),wc_checkout_form.updateTimer=setTimeout(wc_checkout_form.maybe_update_checkout,"1000")},trigger_update_checkout:function(){wc_checkout_form.reset_update_checkout_timer(),wc_checkout_form.dirtyInput=!1,$(document.body).trigger("update_checkout")},maybe_update_checkout:function(){var update_totals=!0;if($(wc_checkout_form.dirtyInput).length){var $required_inputs=$(wc_checkout_form.dirtyInput).closest("div").find(".address-field.validate-required");$required_inputs.length&&$required_inputs.each(function(){""===$(this).find("input.input-text").val()&&(update_totals=!1)})}update_totals&&wc_checkout_form.trigger_update_checkout()},ship_to_different_address:function(){$("div.shipping_address").hide(),$(this).is(":checked")&&$("div.shipping_address").slideDown()},reset_update_checkout_timer:function(){clearTimeout(wc_checkout_form.updateTimer)},is_valid_json:function(raw_json){try{var json=$.parseJSON(raw_json);return json&&"object"==typeof json}catch(e){return!1}},validate_field:function(e){var $this=$(this),$parent=$this.closest(".form-row"),validated=!0,validate_required=$parent.is(".validate-required"),validate_email=$parent.is(".validate-email"),event_type=e.type;if("input"===event_type&&($parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-validated"),$parent.children(".validation-message").remove()),"validate"===event_type||"change"===event_type){if(validate_required&&(("checkbox"!==$this.attr("type")||$this.is(":checked"))&&""!==$this.val()||($parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),$parent.children().hasClass("validation-message")||$parent.append('<span class="validation-message">'+auxshp.invalid_required+"</span>"),validated=!1)),validate_email)if($this.val())new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test($this.val())||($parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email"),$parent.children().hasClass("validation-message")||$parent.append('<span class="validation-message">'+auxshp.invalid_emailadd+"</span>"),validated=!1);if($parent.is(".validate-phone"))if($this.val())new RegExp(/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/).test($this.val())||($parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-phone"),$parent.children().hasClass("validation-message")||$parent.append('<span class="validation-message">'+auxshp.invalid_phonenum+"</span>"),validated=!1);validated&&($parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-postcode woocommerce-invalid-email").addClass("woocommerce-validated"),$parent.children(".validation-message").remove())}},update_checkout:function(event,args){wc_checkout_form.reset_update_checkout_timer(),wc_checkout_form.updateTimer=setTimeout(wc_checkout_form.update_checkout_action,"5",args)},update_checkout_action:function(args){if(wc_checkout_form.xhr&&wc_checkout_form.xhr.abort(),0!==$("form.checkout").length){args=void 0!==args?args:{update_shipping_method:!0};var country=$("#billing_country").val(),state=$("#billing_state").val(),postcode=$(":input#billing_postcode").val(),city=$("#billing_city").val(),address=$(":input#billing_address_1").val(),address_2=$(":input#billing_address_2").val(),s_country=country,s_state=state,s_postcode=postcode,s_city=city,s_address=address,s_address_2=address_2,$required_inputs=$(wc_checkout_form.$checkout_form).find(".address-field.validate-required:visible"),has_full_address=!0;$required_inputs.length&&$required_inputs.each(function(){""===$(this).find(":input").val()&&(has_full_address=!1)}),$("#ship-to-different-address").find("input").is(":checked")&&(s_country=$("#shipping_country").val(),s_state=$("#shipping_state").val(),s_postcode=$(":input#shipping_postcode").val(),s_city=$("#shipping_city").val(),s_address=$(":input#shipping_address_1").val(),s_address_2=$(":input#shipping_address_2").val());var data={security:wc_checkout_params.update_order_review_nonce,payment_method:wc_checkout_form.get_payment_method(),country:country,state:state,postcode:postcode,city:city,address:address,address_2:address_2,s_country:s_country,s_state:s_state,s_postcode:s_postcode,s_city:s_city,s_address:s_address,s_address_2:s_address_2,has_full_address:has_full_address,post_data:$("form.checkout").serialize()};if(!1!==args.update_shipping_method){var shipping_methods={};$('select.shipping_method, input[name^="shipping_method"][type="radio"]:checked, input[name^="shipping_method"][type="hidden"]').each(function(){shipping_methods[$(this).data("index")]=$(this).val()}),data.shipping_method=shipping_methods}$(".woocommerce-checkout-payment, .woocommerce-checkout-review-order-table").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),wc_checkout_form.xhr=$.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","update_order_review"),data:data,success:function(data){if(data&&!0===data.reload)window.location.reload();else{$(".woocommerce-NoticeGroup-updateOrderReview").remove();var termsCheckBoxChecked=$("#terms").prop("checked"),paymentDetails={};if($(".payment_box :input").each(function(){var ID=$(this).attr("id");ID&&(-1!==$.inArray($(this).attr("type"),["checkbox","radio"])?paymentDetails[ID]=$(this).prop("checked"):paymentDetails[ID]=$(this).val())}),data&&data.fragments&&$.each(data.fragments,function(key,value){$(key).replaceWith(value),$(key).unblock()}),termsCheckBoxChecked&&$("#terms").prop("checked",!0),$.isEmptyObject(paymentDetails)||$(".payment_box :input").each(function(){var ID=$(this).attr("id");ID&&(-1!==$.inArray($(this).attr("type"),["checkbox","radio"])?$(this).prop("checked",paymentDetails[ID]).change():null!==$(this).val()&&0===$(this).val().length&&$(this).val(paymentDetails[ID]).change())}),data&&"failure"===data.result){var $form=$("form.checkout");$(".woocommerce-error, .woocommerce-message").remove(),data.messages?$form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-updateOrderReview">'+data.messages+"</div>"):$form.prepend(data),$form.find(".input-text, select, input:checkbox").trigger("validate").blur(),wc_checkout_form.scroll_to_notices()}wc_checkout_form.init_payment_methods(),$(document.body).trigger("updated_checkout",[data])}}})}},blockOnSubmit:function($form){1!==$form.data()["blockUI.isBlocked"]&&$form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},submitOrder:function(){wc_checkout_form.blockOnSubmit($(this))},submit:function(){wc_checkout_form.reset_update_checkout_timer();var $form=$(this);return $form.is(".processing")||!1!==$form.triggerHandler("checkout_place_order")&&!1!==$form.triggerHandler("checkout_place_order_"+wc_checkout_form.get_payment_method())&&($form.addClass("processing"),wc_checkout_form.blockOnSubmit($form),$.ajaxSetup({dataFilter:function(raw_response,dataType){if("json"!==dataType)return raw_response;if(wc_checkout_form.is_valid_json(raw_response))return raw_response;var maybe_valid_json=raw_response.match(/{"result.*}/);return null===maybe_valid_json?console.log("Unable to fix malformed JSON"):wc_checkout_form.is_valid_json(maybe_valid_json[0])?(console.log("Fixed malformed JSON. Original:"),console.log(raw_response),raw_response=maybe_valid_json[0]):console.log("Unable to fix malformed JSON"),raw_response}}),$.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:$form.serialize(),dataType:"json",success:function(result){try{if("success"!==result.result)throw"failure"===result.result?"Result failure":"Invalid response";-1===result.redirect.indexOf("https://")||-1===result.redirect.indexOf("http://")?window.location=result.redirect:window.location=decodeURI(result.redirect)}catch(err){if(!0===result.reload)return void window.location.reload();!0===result.refresh&&$(document.body).trigger("update_checkout"),result.messages?wc_checkout_form.submit_error(result.messages):wc_checkout_form.submit_error('<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>")}},error:function(jqXHR,textStatus,errorThrown){wc_checkout_form.submit_error('<div class="woocommerce-error">'+errorThrown+"</div>")}})),!1},submit_error:function(error_message){$(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),wc_checkout_form.$checkout_form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+error_message+"</div>"),wc_checkout_form.$checkout_form.removeClass("processing").unblock(),wc_checkout_form.$checkout_form.find(".input-text, select, input:checkbox").trigger("validate").blur(),wc_checkout_form.scroll_to_notices(),$(document.body).trigger("checkout_error")},scroll_to_notices:function(){var scrollElement=$(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");scrollElement.length||(scrollElement=$(".form.checkout")),$.scroll_to_notices(scrollElement)}},wc_checkout_coupons={init:function(){$(document.body).on("click","a.showcoupon",this.show_coupon_form),$(document.body).on("click",".woocommerce-remove-coupon",this.remove_coupon),$("form.checkout_coupon").hide().submit(this.submit)},show_coupon_form:function(){return $(".checkout_coupon").slideToggle(400,function(){$(".checkout_coupon").find(":input:eq(0)").focus()}),!1},submit:function(){var $form=$(this);if($form.is(".processing"))return!1;$form.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var data={security:wc_checkout_params.apply_coupon_nonce,coupon_code:$form.find('input[name="coupon_code"]').val()};return $.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:data,success:function(code){$(".woocommerce-error, .woocommerce-message").remove(),$form.removeClass("processing").unblock(),code&&($form.before(code),$form.slideUp(),$(document.body).trigger("update_checkout",{update_shipping_method:!1}))},dataType:"html"}),!1},remove_coupon:function(e){e.preventDefault();var container=$(this).parents(".woocommerce-checkout-review-order"),coupon=$(this).data("coupon");container.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var data={security:wc_checkout_params.remove_coupon_nonce,coupon:coupon};$.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:data,success:function(code){$(".woocommerce-error, .woocommerce-message").remove(),container.removeClass("processing").unblock(),code&&($("form.woocommerce-checkout").before(code),$(document.body).trigger("update_checkout",{update_shipping_method:!1}),$("form.checkout_coupon").find('input[name="coupon_code"]').val(""))},error:function(jqXHR){wc_checkout_params.debug_mode&&console.log(jqXHR.responseText)},dataType:"html"})}},wc_checkout_login_form={init:function(){$(document.body).on("click","a.showlogin",this.show_login_form)},show_login_form:function(){return $("form.login, form.woocommerce-form--login").slideToggle(),!1}},wc_terms_toggle={init:function(){$(document.body).on("click","a.woocommerce-terms-and-conditions-link",this.toggle_terms)},toggle_terms:function(){if($(".woocommerce-terms-and-conditions").length)return $(".woocommerce-terms-and-conditions").slideToggle(function(){var link_toggle=$(".woocommerce-terms-and-conditions-link");$(".woocommerce-terms-and-conditions").is(":visible")?(link_toggle.addClass("woocommerce-terms-and-conditions-link--open"),link_toggle.removeClass("woocommerce-terms-and-conditions-link--closed")):(link_toggle.removeClass("woocommerce-terms-and-conditions-link--open"),link_toggle.addClass("woocommerce-terms-and-conditions-link--closed"))}),!1}};wc_checkout_form.init(),wc_checkout_coupons.init(),wc_checkout_login_form.init(),wc_terms_toggle.init()});